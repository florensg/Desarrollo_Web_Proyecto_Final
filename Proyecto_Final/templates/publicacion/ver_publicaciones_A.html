{% extends "base.html" %}

{% block title %}Publicaciones{% endblock %}

{% block main %}

    {% load static %}

    <main>

        <div id="publicaciones">
            <h2 class="titulo">Publicaciones</h2>

            <div>
                <form action="{% url 'busqueda_filtrada_especie' %}" method="get">

                    <input type="radio" name="especie" value="perro">
                    <label for="perro">Perro</label>
                    <input type="radio" name="especie" value="gato">
                    <label for="gato">Gato</label>

                    <input type="submit" value="Buscar">

                </form>
            </div>

            {% for publicacion in publicaciones %}

                <div id="publicacion">

                    <ul>
                        <li> 
                            <p>Usuario: <a href="{% url 'ver_usuario_externo' user.id %}">{{ publicacion.usuario_creador }}</a> </p>
                        </li>
                        <li> <p>Especie: {{ publicacion.especie }}</p> </li>
                        <li> <p>Foto:</p> <img src="{{ MEDIA_URL }}{{ publicacion.foto.url }}"></li>
                        <li> <p>Descripci√≥n: {{ publicacion.descripcion }}</p></li>
                        <li> <p>Fecha: {{ publicacion.fecha }}</p></li>
                        <li> <p>Estado:

                            {% if publicacion.estado %} 

                                Abierto

                            {% else %}

                                Cerrado

                            {% endif %}

                            </p>
                        </li>
                        <li> <p>Usuarios postulados</p> </li>

                        {% for postulante in postulantes %}

                            <li><p>{{ postulante.usuario_postulado }}</p></li>

                        {% endfor %}

                        
                        <li>
                            {% if publicacion.estado %}
                                <form action="{% url 'postularse' publicacion.id_publicacion %}" method='get'>
                                    <button type='submit' name='id_publicacion' value='{{publicacion.id_publicacion}}'>Postularse</button>
                                </form>
                            {% endif %}
                        </li>
                    </ul>

                </div>
                <br>

            {% endfor %}

        </div>

    </main>

{% endblock %}
